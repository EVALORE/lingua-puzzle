@let cardHeight = 35;
@let numberOfSentences = 10;
@let resultHeight = cardHeight * numberOfSentences + 'px';

<div class="translation">
  {{ translatedSentence() }}
</div>

<mat-card [style]="{ height: resultHeight }">
  @for (sentence of completedSentences; track sentence) {
    <div class="result completed">
      @for (card of sentence; track card) {
        <div class="word" [style]="{ width: card.width }">
          {{ card.word }}
        </div>
      }
    </div>
  }
  <div
    class="result"
    cdkDropList
    #resultList="cdkDropList"
    cdkDropListOrientation="horizontal"
    [cdkDropListData]="result()"
    [cdkDropListConnectedTo]="[sourceList]"
    (cdkDropListDropped)="drop($event)"
  >
    @for (card of result(); track card) {
      <mat-card
        appWordCard
        class="word"
        [class.correct]="card.positionStatus === 'CORRECT'"
        [class.wrong]="card.positionStatus === 'WRONG'"
        [style]="{ width: card.width }"
        (click)="moveToSource($index)"
        @filterAnimation
        cdkDrag
        >{{ card.word }}
      </mat-card>
    }
  </div>
</mat-card>

<div
  class="source"
  cdkDropList
  #sourceList="cdkDropList"
  cdkDropListOrientation="horizontal"
  cdkDropList
  [cdkDropListData]="source()"
  [cdkDropListConnectedTo]="[resultList]"
  (cdkDropListDropped)="drop($event)"
>
  @for (card of source(); track card) {
    <mat-card
      appWordCard
      class="word"
      [style]="{ width: card.width }"
      (click)="moveToResult($index)"
      @filterAnimation
      cdkDrag
    >
      {{ card.word }}
    </mat-card>
  }
</div>

@if (source().length === 0) {
  <button mat-raised-button (click)="startResultAutoComplete()">Auto Complete</button>
  <button
    mat-raised-button
    color="primary"
    (click)="isWin() ? nextSentence() : startCardsChecking()"
  >
    {{ isWin() ? 'Continue' : 'Check' }}
  </button>
}
